# Below trigger will get activated when admin tries to purchase a movie from Distributor.

CREATE OR REPLACE TRIGGER STATUS_D AFTER INSERT ON PURCHASE FOR EACH ROW
DECLARE
AB CHAR(20);
BEGIN
SELECT STATUS INTO AB FROM DISTRIBUTOR M WHERE :NEW.MID=M.MID ;
IF AB='NO' THEN RAISE_APPLICATION_ERROR(-20123,'AUTHENTICATED MOVIE');
ELSE
DBMS_OUTPUT.PUT_LINE('SUCCESSFULLY PURCHASED');
END IF;
END;
